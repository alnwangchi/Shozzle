---
layout: '@layouts/BlogPostLayout.astro'
title: Echartsç°¡å–®ç•«åœ°åœ–
date: 2023-07-06
author: Maureen
image: { src: 'https://s4.itho.me/sites/default/files/styles/picture_size_large/public/field/image/jie_tu_2021-02-01_xia_wu_3.54.25.jpg?itok=rck1LqUG', alt: 'ç¯„ä¾‹' }
description: Apache Echarts æ˜¯ä»€éº¼ç¥å¥‡å¥½ç‰©ï¼ç°¡å–®ä»‹ç´¹ Echartsï¼Œç„¡ç—›æˆç‚ºåœ–è¡¨é”äººï¼
draft: false
category: Echarts,Vue,mapshaper
---
## Description

<p>{frontmatter.description}</p>

## é€™ç¯‡æ–‡ç« æœƒæåˆ°
<ul>
  <li>Echarts æ˜¯ä»€éº¼</li>
  <li>Echarts å®‰è£èˆ‡ä½¿ç”¨</li>
  <li>å¾å“ªè£¡å¾—åˆ°å°ç£çš„ geojson</li>
</ul>

## Echarts æ˜¯ä»€éº¼
### ç‚ºä»€éº¼æƒ³ä½¿ç”¨Echats 
ç•«åœ°åœ–çš„libraryæ¯”æ¯”çš†æ˜¯ï¼Œæ¯”è¼ƒå¸¸è¦‹çš„åƒ Leaflet.jsã€D3.jsã€‚
ä¹‹æ‰€ä»¥æœƒæƒ³ä½¿ç”¨Echartsä¾†ç¹ªè£½ï¼Œä¸»è¦æ˜¯ç”±æ–¼å·¥ä½œä¸Šå¸¸å¸¸éœ€è¦å°‡è³‡æ–™æ”¾åœ¨å°ç£çš„åœ°åœ–ä¸Šä¾†åƒç…§ã€‚
æœ‰æ™‚å€™ä¹Ÿæœƒéœ€è¦ä¾†å›åˆ‡æ›ç¸£å¸‚å’Œé„‰é®åœ°åœ–ã€‚
æœ‰ç”¨éLeafletçš„è®€è€…æ‡‰è©²çŸ¥é“ï¼Œç•«é¢çš„Loadingå¯¦åœ¨è¦ç­‰å¤ªä¹…ï½æ•ˆç‡å¾ˆå·®ã€‚
åŸºæ–¼é€™å€‹ç†ç”±ï¼Œå†åŠ ä¸Šå¦‚æœåªæ˜¯éœ€è¦å‘ˆç¾ç¸£å¸‚è¼ªå»“ï¼Œä¸éœ€è¦å‘ˆç¾æ›´å¤šçš„ç´°ç¯€ã€‚
Echarts å®¹æ˜“ä¸Šæ‰‹ã€å®˜æ–¹å°‡åŠŸèƒ½åšçš„åˆç¾åˆå¥½ç”¨ï¼Œåœ¨çœ¾å¤šlibraryä¸­è„«ç©è€Œå‡ºğŸ‘‘

### Echatsçš„å„ªç¼ºé»
é™¤äº†ä¸Šè¿°æåˆ°çš„å¥½å…¥é–€ã€åŠŸèƒ½å¾ˆè®šï¼Œé‚„æœ‰å…¶ä»–å„ªé»ï¼š
1. å¯ä»¥é–±è®€å£“ç¸®å¾Œçš„jeojsonï¼Œå°‡æª”æ¡ˆå¤§å°è®Šå°

      geojsonçš„coordinatesé€šå¸¸éƒ½æ˜¯è½è½é•·ä¸€å¤§ä¸²ï¼ŒEchartsæœ‰å€‹ç‰¹æ®Šçš„å£“ç¸®æ–¹å¼ï¼Œå¯ä»¥å¤§å¹…ç¸®æ¸›ç¯‡å¹…ï¼Œè©³ç´°å¦‚ä½•ç¸®æ¸›çš„æ­¤ç¯‡æ–‡ç« å…ˆä¸è«‡ï½
      ä»¥ä¸‹ç¯„ä¾‹ç‚ºå£“ç¸®å¾Œçš„ç¨‹å¼ç¢¼ï¼ŒçœŸçš„è¶…ç´šç²¾ç°¡ğŸ¥¹
  ```javascript
    // å£“ç¸®å¾Œçš„geojsonç¯€éŒ„
      "geometry": {
        "type": "MultiPolygon",
        "coordinates": [["@@HCGG@CMGBCKECDGGGE@FDNHDDH@FLBFCDFFB"],["@@HAAEKICBEGG@GDINFFJ@@CJDP@"],
          ["@@FABCL@@EGKBCLABEJB@GLHCH@FHAJFJ@LBLCCEAIECIKCFGC@EMKG@AFE@IGEGE@@HQ@CFG@DJHF@DFFCDAFFBDHGDDL"],
          ["@@H@BGJ@@IEIDABFFDJ@BAAGMGAFO@CGG@EACBG@AAMCGG@GBSCEIA@L@HABFJFFEFBFDFPJHANNHDADHD"],
          ["@@BEIEEECBFNDAHD"],["@@FEGABH"],["@@AEHGGGBCGEIBCFDFHFCFNF"],["@@QQCBHHDFJB"],
          ["@@DEDECKHCNB@HFHH@@GHEHBFGBEK@CFIMEAAECBGCKHFJAFGDGCBJGFEGCHLFAFLB"]
        ],
      }
  ```

2. åœ°åœ–äº’å‹•çš„åŠŸèƒ½ï¼Œæ‡‰æœ‰ç›¡æœ‰ï¼Œè¨­å®šä¹Ÿéå¸¸ç°¡å–®ï¼

ç¼ºé»çš„éƒ¨åˆ†ï¼Œæ˜¯åœ¨å°ç£çš„è¨è«–åº¦ç›¸å°ä½ã€‚ç›¸é—œè¨è«–å¹¾ä¹éƒ½åœ¨ä¸­åœ‹è«–å£‡ï¼Œæœ‰ä»»ä½•å•é¡Œä¹Ÿæ˜¯ä»¥ç°¡é«”ä¸­æ–‡çš„å›ç­”ç‚ºå¤§å®—ã€‚



## Echarts å®‰è£èˆ‡ä½¿ç”¨

[Echarts å®˜ç¶²](https://echarts.apache.org/zh/index.html)

é¦–å…ˆåœ¨ä½ çš„å°ˆæ¡ˆä¸­å®‰è£ Echarts(ä»¥ä¸‹ç”¨vueå°ˆæ¡ˆä¾†åšç¤ºç¯„)
  <li> Install ECharts </li>

  ```javascript
    npm install echarts --save
  ```

  <li> Import ECharts </li>
  ```javascript
    åœ¨ main.js ä¸­ import echarts

    import * as echarts from 'echarts';

    Vue.prototype.$echarts = echarts;
  ```

  <li>demo.vue</li>
  ```
    <template>
      <div>
        // åœ°åœ–çš„div ä¸€å®šè¦çµ¦ width å’Œ height
        <div id="map_chart" :style="{ width: '800px', height: '800px' }"></div>
      </div>
    </template>
  ```
  ```
    <script>
    import mapJson from '../assets/map.json';

    export default {
      mounted() {
        this.create_chart();
      },

      methods: {
        create_chart() {
          // é¸æ“‡è¦ç¹ªåœ–çš„DOM
          let map_chart = this.$echarts.init(document.getElementById("map_chart"));
          // ä½¿ç”¨ registerMap è¨»å†Šåœ°åœ–
          this.$echarts.registerMap('mapJson', mapJson);

          const option = {
            series: [
              {
                name: "å°ç£åœ°åœ–",
                type: "map", // å¿…è¦çš„
                map: "mapJson", // å¿…è¦çš„
                silent: false, // hoveråœ°åœ–çš„è®ŠåŒ–
                emphasis: { // hoveråœ°åœ–çš„è®ŠåŒ–çš„è¨­å®š
                  itemStyle: {
                    areaColor: 'none'
                  },
                  label: {
                    show: true,
                  },
                },
                select: { // åœ°åœ–é»é¸å¾Œçš„è®ŠåŒ–çš„è¨­å®š
                  disabled: false, // èƒ½ä¸èƒ½é»é¸åœ°åœ–
                  itemStyle: {
                    areaColor: 'steelblue'
                  },
                },
                label: { // åœ°åœ–ä¸Šè¦ä¸è¦é¡¯ç¤ºå€åŸŸåç¨±
                  show: true,
                },
                data: mapData.data[0],
                roam: true, // åœ°åœ–å¯ä»¥å¹³ç§»åŠç¸®æ”¾
                boundingCoords:[ [118,26.5], [122.4,21.5] ],
                center: [120.3, 23.8],
                layoutCenter: ['50%', '50%'],
                left: '5%', 
                aspectScale:1,
                scaleLimit: { min: 1, max: 12.0 },
              }
            ],
            // color bar
            visualMap: { 
              min: 0,
              max: 20,
              text: ["High", "Low"],
              realtime: false,
              calculable: true,
              inRange: {
                color: ["lightskyblue", "yellow", "orangered"],
              },
            },
          };
          map_chart.setOption(option);
        },
      },
    };
    </script>
  ```

## å¾å“ªè£¡å¾—åˆ°å°ç£çš„ geojson
1. [æ”¿åºœè³‡æ–™é–‹æ”¾å¹³è‡º](https://data.gov.tw/dataset/7442)
2. æ”¿åºœè³‡æ–™é–‹æ”¾å¹³è‡ºä¸‹è¼‰[ç›´è½„å¸‚ã€ç¸£å¸‚ç•Œç·š(TWD97ç¶“ç·¯åº¦)SHPæ ¼å¼](https://data.gov.tw/dataset/7442)

  è¨»ï¼šSHP -> geojsonï¼šå°‡æª”æ¡ˆæ”¾ä¸Š[mapshaper](https://mapshaper.org/)ï¼Œå¯ä»¥è½‰æˆ geojson æ ¼å¼ã€‚
  æ­¥é©Ÿ[å¯åƒè€ƒæ­¤ç¯‡æ–‡ç« ](https://ithelp.ithome.com.tw/articles/10223786)ã€‚

