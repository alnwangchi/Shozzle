---
layout: '@layouts/BlogPostLayout.astro'
title: åœ¨ Next.js å°ˆæ¡ˆä¸­ä½¿ç”¨ ESLint + Prettier
date: 2024-05-31
author: Jamie Chien
image: { src: 'https://i.imgur.com/xP8OMVk.png', alt: 'eslint+prettier' }
description: ESLint å’Œ Prettier åˆ†åˆ¥æ˜¯ä»€éº¼å‘¢? è¦å¦‚ä½•åœ¨ Next.js ä¸­ä½¿ç”¨ ESLint + Prettier?
draft: false
category: ESLint, Prettier, nextjs
tags: Shozzle
---

import { Callout } from '@components/postComponents/callout';

## å‰è¨€

ä½ æ˜¯å¦æ›¾ç¶“å› ç‚ºè¨­å®š ESLint å’Œ Prettier è€Œæå¾—ç„¦é ­çˆ›é¡å‘¢? å‰›å¥½æœ€è¿‘åœ¨å…¬å¸è¦è² è²¬å»ºç½®ä¸€å€‹å…¨æ–°çš„å°ˆæ¡ˆï¼Œè¶é€™å€‹æ™‚æ©Ÿä¾†å¥½å¥½åœ°äº†è§£ä¸€ä¸‹ç‚ºä»€éº¼æœƒæƒ³è¦æŠŠ ESLint å’Œ Prettier çµ„åˆå†ä¸€èµ·ï¼Œä»¥åŠäº†è§£ä¸€ä¸‹ä»–å€‘å„è‡ªæ‰€è¦é”æˆçš„ç›®çš„æ˜¯ä»€éº¼

> ä»¥ä¸‹å…§æ–‡æœƒä»¥ Airbnb coding style ä¾†ä½œç¯„ä¾‹ï¼Œæœ€å¾Œä¹Ÿæœƒé™„ä¸Šä¸€å€‹æˆ‘è‡ªå·±å»ºç½®å¥½çš„å°ˆæ¡ˆ Template~

<Callout type="info">
  è‹¥æƒ³ç›´æ¥çœ‹æ€éº¼åœ¨ Next.js ä¸­åŒæ™‚ä½¿ç”¨ ESLint + Prettier çš„è©±ï¼Œå¯ä»¥ç›´æ¥è·³è½‰åˆ°[ç¯„ä¾‹
  Template](#ç¯„ä¾‹-template)
</Callout>

## ç›®éŒ„

- [ä»€éº¼æ˜¯ ESLint?](#ä»€éº¼æ˜¯-eslint)
- [ä»€éº¼æ˜¯ Prettier?](#ä»€éº¼æ˜¯-prettier)
- [ESLint å’Œ Prettier çš„å·®ç•°?](#eslint-å’Œ-prettier-çš„å·®ç•°)
- [åŒæ™‚ä½¿ç”¨ ESLint å’Œ Prettier çš„ç›®çš„æ˜¯?](#åŒæ™‚ä½¿ç”¨-eslint-å’Œ-prettier-çš„ç›®çš„æ˜¯)
- [çµ„åˆ ESLint å’Œ Prettier](#çµ„åˆ-eslint-å’Œ-prettier)
- [ç¯„ä¾‹ Template](#ç¯„ä¾‹-template)

## ä»€éº¼æ˜¯ ESLint?

å®˜æ–¹çš„æ•˜è¿°æ˜¯é€™æ¨£:

> ESLint is a tool for identifying and reporting on patterns found in ECMAScript/JavaScript code, with the goal of making code more consistent and avoiding bugs.

ç°¡å–®ä¾†èªªï¼ŒESLint å­˜åœ¨çš„ç›®çš„å°±æ˜¯ç‚ºäº†è®“ **ECMAScript/JavaScript** ç¨‹å¼ç¢¼æ›´ä¸€è‡´ä¸¦ä¸”é¿å…éŒ¯èª¤

åœ¨ [ESLint Core Concepts](https://eslint.org/docs/latest/use/core-concepts/) çš„é é¢æ›´æ˜¯æœ‰æåˆ°:

> ESLint is a configurable JavaScript linter. It helps you find and fix problems in your JavaScript code. Problems can be anything from potential runtime bugs, to not following best practices, to styling issues.

å› æ­¤ï¼Œä½¿ç”¨ ESLint é€™å€‹ Javascript linter ä¾†æ‰¾åˆ°æ·ºè—åœ¨ Javascript code çš„å•é¡Œï¼Œå¯ä»¥å¤§å¤§æ¸›å°‘ runtime bugs çš„å‡ºç¾ï¼Œåˆæˆ–æ˜¯è®“é–‹ç™¼è€…æ›´å¥½çš„éµå¾ªæœ€ä½³å¯¦è¸ï¼Œä¸¦æ¸›å°‘ styling issues

<Callout type="note">
  çµè«–: <strong>ESLint</strong> æ˜¯ <strong>linter</strong> çš„ä¸€ç¨®ï¼Œè€Œ <strong>linter</strong>{' '}
  æ›´æ“…é•·æ‰¾åˆ°éš±è—çš„ syntax errorï¼Œä¸¦æ”¹å–„èªæ³•
</Callout>

## ä»€éº¼æ˜¯ Prettier?

å®˜æ–¹çš„æ•˜è¿°æ˜¯é€™æ¨£:

> Prettier is an opinionated code formatter with support for Javascript, JSX, Angular, Vue, Typescript.... It removes all original styling and ensures that all outputted code conforms to a consistent style.

**Prettier** ç§»é™¤å¾ˆå¤šåŸå§‹çš„ stylingï¼Œä¸¦æ ¹æ“šåˆ¶å®šçš„è¦å‰‡ä¾†é‡æ–°ç·¨æ’ç¨‹å¼ç¢¼ï¼Œä»–ä¸åœ¨ä¹ç¨‹å¼ç¢¼çš„èªæ„ï¼ŒæŠŠé‡é»é›†ä¸­åœ¨è®“ç¨‹å¼ç¢¼ç¬¦åˆä¸€è‡´çš„ coding style

<Callout type="note">
  çµè«–: <strong>Prettier</strong> æ˜¯ <strong>formatter</strong> çš„ä¸€ç¨®ï¼Œè€Œ
  <strong>formatter</strong> æ›´æ“…é•·æ ¹æ“š coding style (rules)å»æ ¼å¼åŒ–(format)ç¨‹å¼ç¢¼
</Callout>

## ESLint å’Œ Prettier çš„å·®ç•°?

<Callout type="tip">
  ç°¡å–®ä¾†èªªï¼Œ<strong>ESLint</strong> æ˜¯ä¸€ç¨® linterï¼›<strong>Prettier</strong> æ˜¯ä¸€ç¨® formatter
</Callout>

ä»¥ä¸‹è¡¨æ ¼æ˜¯å…©è€…çš„ä¸€äº›æ¯”è¼ƒ:

|                      | ESLint | Prettier |
| -------------------- | ------ | -------- |
| å›å ±ç¨‹å¼ç¢¼éŒ¯èª¤       | Yes    | No       |
| è‡ªå‹•ä¿®æ­£ç¨‹å¼ç¢¼éŒ¯èª¤   | Yes    | No       |
| æ–°å¢å®¢è£½åŒ–è¦å‰‡/é¸é …  | Yes    | No       |
| æä¾›é…ç½®é¸é …         | Yes    | Poor     |
| æ ¼å¼åŒ–(format)ç¨‹å¼ç¢¼ | Yes    | Yes      |

## åŒæ™‚ä½¿ç”¨ ESLint å’Œ Prettier çš„ç›®çš„æ˜¯?

å¥—ä¸€å¥ Prettier å®˜æ–¹çš„è©±:

> Use **Prettier for formatting** and **linters for catching bugs**!

åˆ†åˆ¥ä½¿ç”¨ ESLint å’Œ Prettier çš„ç›®çš„æ˜¯ç‚ºäº†è®“ä»–å€‘å„å¸å…¶è·ï¼Œé€é ESLint ä¾†ç¢ºä¿ç¨‹å¼ç¢¼å“è³ªä¸¦æ¸›å°‘éš±è—çš„éŒ¯èª¤ï¼›é€é Prettier ä¾†æ ¼å¼åŒ–ç¨‹å¼ç¢¼ä¸¦ä½¿ç¨‹å¼ç¢¼ç¬¦åˆä¸€è‡´çš„ coding style

## çµ„åˆ ESLint å’Œ Prettier

å¾ä¸Šé¢ [ESLint å’Œ Prettier çš„å·®ç•°](#ESLint-å’Œ-Prettier-çš„å·®ç•°) å¯ä»¥ç™¼ç¾ï¼ŒESLint å’Œ Prettier éƒ½æœ‰ **æ ¼å¼åŒ–(format)ç¨‹å¼ç¢¼** çš„åŠŸèƒ½ï¼Œå› æ­¤å¯æƒ³è€ŒçŸ¥ï¼Œåœ¨åŒæ™‚ä½¿ç”¨ ESLint å’Œ Prettier çš„æ™‚å€™æ‡‰è©²æœƒç™¼ç”Ÿä¸å°‘å•é¡Œ(å…©è€…è¡çª)

é€™éƒ¨åˆ†åœ¨ [Prettier çš„å®˜æ–¹æ–‡ä»¶](https://prettier.io/docs/en/integrating-with-linters) ä¸­ä¹Ÿæœ‰æåˆ°:

> Linters usually contain not only code quality rules, but also stylistic rules. Most stylistic rules are unnecessary when using Prettier, but worse â€“ they might conflict with Prettier!

å› æ­¤ï¼Œæˆ‘å€‘éœ€è¦å»è§£æ±ºé€™å€‹å•é¡Œ!!!

**Solution**

å¹¸å¥½ï¼ŒPrettier çš„å®˜æ–¹æœ‰æä¾›ä¸€å€‹å¾ˆç°¡å–®çš„æ–¹å¼ï¼Œå¯ä»¥é€éä»¥ä¸‹çš„ extension å’Œ plugin ä¾†è§£æ±ºè¡çªå•é¡Œ:

### ğŸš€ [eslint-config-prettier](https://www.npmjs.com/package/eslint-config-prettier)

é€™å€‹ extension æœƒé—œæ‰ ESLint ä¸­æ‰€æœ‰è·Ÿ Prettier è¡çª(æˆ–ä¸å¿…è¦)çš„ rules

**How to Use**

1. å®‰è£ eslint-config-prettier

```bash
npm install --save-dev eslint-config-prettier
```

2. è¨­å®š .eslintrc.json æª”æ¡ˆ

```json
{
  "extends": [
    ...,
    "prettier"
  ]
}
```

<Callout type="tip">ç¢ºä¿æŠŠ `"prettier"` æ”¾åœ¨ `extends` array çš„æœ€å¾Œé¢</Callout>

### ğŸš€ [eslint-plugin-prettier](https://www.npmjs.com/package/eslint-plugin-prettier/v/4.0.0) (optional)

æŠŠ Prettier ç•¶ä½œ ESLint çš„ rule ä¾†ä½¿ç”¨ï¼Œæ¦‚å¿µä¸Šå°±æ˜¯å¦‚æœç¨‹å¼ç¢¼ä¸ç¬¦åˆ Prettier æ™‚ï¼Œæœƒå›å ±ä¸€å€‹ ESLint çš„éŒ¯èª¤

<Callout type="warning">Prettier å®˜æ–¹è¡¨ç¤º: ä¸€èˆ¬ä¸æ¨è–¦</Callout>

**How to Use**

1. å®‰è£ eslint-config-prettier

```bash
npm install --save-dev eslint-plugin-prettier
```

2. è¨­å®š .eslintrc.json æª”æ¡ˆ

```json
{
  "plugins": ["prettier"],
  "rules": {
    "prettier/prettier": "error"
  }
}
```

<Callout type="info">
  ä½¿ç”¨é€™å€‹ plugin å¯èƒ½æœƒæœ‰ä»¥ä¸‹ç¼ºé»:
  <ul>
    <li>
      å¯èƒ½æœƒå°è‡´åœ¨ç·¨è¼¯å™¨ä¸­å‡ºç¾å¾ˆå¤šç´…èš¯èš“(éŒ¯èª¤æç¤º)ï¼Œé€™é•èƒŒäº† Prettier çš„åˆè¡·(ä¸éœ€è¦è‡ªè¡Œé¢å°
      formatting çš„å•é¡Œ)
    </li>
    <li>æ¯”ç›´æ¥é‹è¡Œ Prettier é‚„æ…¢</li>
  </ul>
</Callout>

## ç¯„ä¾‹ Template

ğŸ‘‰ [**é»æˆ‘æŸ¥çœ‹ç¯„ä¾‹**](https://github.com/tsungyu927/nextjs-eslint-prettier-starter)

åœ¨é€™å€‹ç¯„ä¾‹ä¸­ä½¿ç”¨åˆ°çš„æŠ€è¡“å¦‚ä¸‹:

- [Typescript](https://www.typescriptlang.org/)
- [Next.js](https://nextjs.org/) (Version 14 with App Router)
- [TailwindCSS](https://tailwindcss.com/)
- [ESLint (Airbnb)](https://github.com/airbnb/javascript)
- [Prettier](https://prettier.io/)

### ESLint ç›¸é—œå¥—ä»¶

{/* prettier-ignore */}
| å¥—ä»¶ | èªªæ˜ | ä¾è³´(éœ€è¦å“ªäº›é¡å¤–å¥—ä»¶) |
| -------- | -------- | -------- |
| [eslint](https://www.npmjs.com/package/eslint) | ESLint æœ¬èº«ï¼Œç”¨ä¾†è­˜åˆ¥ä¸¦å›å ±åœ¨ ECMAScript/JavaScript ä¸­ä¸ç¬¦åˆè¦å®šçš„ç¨‹å¼ç¢¼ | |
| [eslint-config-airbnb](https://www.npmjs.com/package/eslint-config-airbnb) | ç‚º Javascript å’Œ React ç¨‹å¼ç¢¼æä¾›ä¸€çµ„ç”± Airbnb å®šç¾©çš„ rules å’Œ style æŒ‡å— | `eslint`, `eslint-plugin-import`, `eslint-plugin-react`, `eslint-plugin-react-hooks`, `eslint-plugin-jsx-a11y` |
| [eslint-config-next](https://www.npmjs.com/package/eslint-config-next) | åŒ…æ‹¬ä¸€çµ„å°ˆé–€é‡å° Next.js é‡èº«å®šè£½çš„(æ¨è–¦çš„) ESLint è¦å‰‡ | |
| [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier) | é€™å€‹ extension æœƒé—œæ‰ ESLint ä¸­æ‰€æœ‰è·Ÿ Prettier è¡çª(æˆ–ä¸å¿…è¦)çš„ rules | |
| [eslint-plugin-import](https://www.npmjs.com/package/eslint-plugin-import) | é€™å€‹ Plugin æ”¯æ´ linting ES2015+(ES6+) çš„ import/export èªæ³•ï¼Œä¸¦é˜²æ­¢å‡ºç¾éŒ¯èª¤çš„æª”æ¡ˆè·¯å¾‘å’ŒéŒ¯èª¤çš„ import åç¨± | |
| [eslint-plugin-jsx-a11y](https://www.npmjs.com/package/eslint-plugin-jsx-a11y) | é€™å€‹ Plugin æä¾›ä¸€çµ„ rules ä¾†åœ¨ JSX ä¸­åŸ·è¡Œ accessibility çš„æœ€ä½³å¯¦è¸ï¼Œä»–å¹«åŠ©æˆ‘å€‘è­˜åˆ¥ä¸¦ä¿®æ­£ä¸€äº›å¸¸è¦‹çš„ accessibility çš„å•é¡Œ | `eslint` |
| [eslint-plugin-unused-imports](https://www.npmjs.com/package/eslint-plugin-unused-imports) | é€™å€‹ Plugin æœƒæ‰¾åˆ°ä¸¦ä¸”ç§»é™¤æ²’æœ‰ä½¿ç”¨çš„ ES6 module import | <ul><li>Typescript: `@typescript-eslint/eslint-plugin`, `@typescript-eslint/parser` </li><li>React: `eslint-plugin-react` (ä¸¦ä¸” enable `react/jsx-uses-react` å’Œ `react/jsx-uses-vars`)</li></ul> |
| [eslint-import-resolver-typescript](https://www.npmjs.com/package/eslint-import-resolver-typescript) | èˆ‡ `eslint-plugin-import` æ’ä»¶é…åˆä½¿ç”¨ï¼Œå¹«åŠ© ESLint æ ¹æ“š TypeScript çš„é…ç½®ä¾†ç†è§£ä¸¦æ­£ç¢ºè§£æ module çš„è·¯å¾‘ | `eslint`, `eslint-plugin-import` |
| [@typescript-eslint/eslint-plugin](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin) | ä¸€å€‹ ESLint çš„ Pluginï¼Œç‚º Typescript codebases æä¾› lint rules | |
| [@typescript-eslint/parser](https://www.npmjs.com/package/@typescript-eslint/parser) | ä¸€å€‹ ESLint çš„ parserï¼Œä»–å€ŸåŠ© [Typescript ESTree](https://github.com/typescript-eslint/typescript-eslint/tree/main/packages/typescript-estree) ä¾†å…è¨± ESLint lint Typescript ç¨‹å¼ç¢¼ | |

<Callout type="tip">
  `eslint-config-airbnb` ä¾è³´å¥—ä»¶ä¸­çš„`eslint-plugin-react`å’Œ`eslint-plugin-react-hooks` å·²ç¶“ç”±
  `eslint-config-next` å…§å»ºæä¾›ï¼Œå› æ­¤å°±ä¸ç”¨é¡å¤–æ–°å¢é€™å…©å€‹ Plugin
  ([ç›¸é—œé€£çµ](https://nextjs.org/docs/app/building-your-application/configuring/eslint#eslint-config))
</Callout>

<Callout type="info">
  `eslint-plugin-jsx-a11y` é›–ç„¶æœƒè¢« `eslint-config-airbnb` ä½¿ç”¨åˆ°ï¼Œä½†**ä¸éœ€è¦**æ‰‹å‹•æ–°å¢
  pluginï¼Œå› æ­¤åœ¨ .eslintrc.json ä¸­**ä¸éœ€è¦**åŠ ä¸Š `plugins: ["jsx-a11y"]`
</Callout>

### Prettier ç›¸é—œå¥—ä»¶

{/* prettier-ignore */}
| å¥—ä»¶ | èªªæ˜ | ä¾è³´(éœ€è¦å“ªäº›é¡å¤–å¥—ä»¶) |
| -------- | -------- | -------- |
| [prettier](https://www.npmjs.com/package/prettier) | Prettier æœ¬èº«ï¼Œç”¨ä¾†æ ¼å¼åŒ–ç¨‹å¼ç¢¼ | |
| [prettier-plugin-tailwindcss](https://www.npmjs.com/package/prettier-plugin-tailwindcss/v/0.0.0-insiders.d539a72) | æ˜¯ä¸€å€‹ Pluginï¼Œä¹Ÿæ˜¯ TailwindCSS å®˜æ–¹æ¨è–¦çš„ Pluginï¼Œç”¨ä¾†è‡ªå‹•æ’åºç¨‹å¼ç¢¼ä¸­çš„ classes | `prettier` |
| [@trivago/prettier-plugin-sort-imports](https://www.npmjs.com/package/@trivago/prettier-plugin-sort-imports/v/2.0.0) | æ˜¯ä¸€å€‹ Pluginï¼Œç”¨ä¾†æ’åºç¨‹å¼ç¢¼ä¸­ import çš„é †åºï¼Œå¯ä»¥åœ¨ `.prettierrc` ä¸­è‡ªè¨‚ç¾©é †åº | `prettier` |

> å…¶ä»– Convention:
>
> 1. JSX å±¬æ€§è«‹ä½¿ç”¨ **double quotes (`"`)**ï¼›å…¶ä»– JS è«‹ä½¿ç”¨ **single quotes (`'`)**
> 2. å…¶ä»– Airbnb ç›¸é—œè¦ç¯„è«‹åƒè€ƒæˆ‘æ•´ç†çš„é€™ä¸€ä»½ï¼ˆ[Link](https://hurricane-activity-c3d.notion.site/ESLint-Prettier-Rules-df67abf7c83d413b86d07a3b6bb3a9e1?pvs=74)ï¼‰
